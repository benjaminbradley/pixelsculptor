(this.webpackJsonppixelsculptor=this.webpackJsonppixelsculptor||[]).push([[0],{14:function(e,t,c){},15:function(e,t,c){},17:function(e,t,c){"use strict";c.r(t);var n,r=c(1),a=c.n(r),o=c(9),l=c.n(o),i=(c(14),c(2)),s=(c(15),c(7)),u=c(3),d=c(0),j={CUSTOM_PALETTE:"cp",SCULPT_PATH:"s",PALETTE_TYPE:"pt",PALETTE_NAME:"p",DEFAULT_COLOR:"d"},b={GRADIENT:"g",CYCLE:"c",MONOCHROME:"m"},f=(n={},Object(u.a)(n,j.PALETTE_TYPE,b.GRADIENT),Object(u.a)(n,j.PALETTE_NAME,"gs"),Object(u.a)(n,j.DEFAULT_COLOR,"#ddd"),n),O=Object(r.createContext)(),p=1;function h(){if(0===window.location.hash.length)return{};var e={};return window.location.hash.substring(1).split("&").forEach((function(t){var c=t.split("="),n=Object(i.a)(c,2),r=n[0],a=n[1];a.length&&(e[r]=decodeURIComponent(a))})),e}function E(e,t){var c=h();c[e]=t;var n=Object.entries(c).map((function(e){var t=Object(i.a)(e,2),c=t[0],n=t[1];return"".concat(c,"=").concat(encodeURIComponent(n))})).join("&");window.location.hash=n}function T(e,t){return{type:p,key:e,value:t}}var v=function(e,t){switch(t.type){case p:return Object(s.a)(Object(s.a)({},e),{},Object(u.a)({},t.key,t.value));default:return e}};function m(e){var t=Object(r.useReducer)(v,f),c=Object(i.a)(t,2),n={config:c[0],dispatch:c[1]};return Object(d.jsx)(O.Provider,Object(s.a)({value:n},e))}function C(){return Object(r.useContext)(O)}var g=c(4),_={custom:[],a:["#b2b2b2","#50394c","#f4e1d2","#ffef96"],b:["#80ced6","#d5f4e6","#fefbd8","#618685"],c:["#034f84","#92a8d1","#f7cac9","#f7786b"],d:["#4040a1","#36486b","#618685","#fefbd8"],e:["#6b5b95","#878f99","#a2b9bc","#b2ad7f"],f:["#622569","#b8a9c9","#d6d4e0","#5b9aa0"],g:["#c83349","#e06377","#eeac99","#f9d5e5"],h:["#ff7b25","#d64161","#6b5b95","#feb236"],i:["#d96459","#f2ae72","#588c7e","#f2e394"],j:["#b2ad7f","#878f99","#a2b9bc","#6b5b95"],bw:["#fff","#000"]},A={custom:{},a:{0:"#fefbd8",15:"#4040a1"},b:{0:"#f9d5e5",15:"#c83349"},c:{0:"#80ced6",6:"#622569",15:"#000"},d:{0:"#f00",5:"#0f0",10:"#00f",15:"#f00"},e:{0:"#0f0",5:"#00f",10:"#f00",15:"#0f0"},f:{0:"#00f",5:"#f00",10:"#0f0",15:"#00f"},gs:{0:"#fff",15:"#000"}};function x(e,t){if(t===b.CYCLE)return e.map((function(e){return e.colorCode})).join(",");if(t===b.GRADIENT){var c=L(e);return Object.entries(c).map((function(e){var t=Object(i.a)(e,2),c=t[0],n=t[1];return"".concat(c,":").concat(n)})).join(",")}return console.log("ERROR: Unknown CustomPalette type: '".concat(t,"'")),null}function P(e,t){if(t===b.CYCLE)return e.split(",").map((function(e){return{colorCode:e}}));if(t===b.GRADIENT){var c=[];e.split(",").forEach((function(e){var t=e.split(":"),n=Object(i.a)(t,2),r=n[0],a=n[1];c[r]={colorCode:a}}));for(var n=0;n<c.length;n++)c[n]||(c[n]={colorCode:""});return c}return console.log("ERROR: Unknown CustomPalette type: '".concat(t,"'")),null}function L(e){for(var t={},c=0;c<e.length;c++)e[c]&&"colorCode"in e[c]&&e[c].colorCode&&(t[c]=e[c].colorCode);return t}var y={};var S=function(){var e=document.createElement("canvas");e.width=e.height=1;var t=e.getContext("2d");return function(e,t){return function(c){return c in y||(y[c]=e.call(t,c)),y[c]}}((function(e){t.clearRect(0,0,1,1),t.fillStyle="#000",t.fillStyle=e;var c=t.fillStyle;return t.fillStyle="#fff",t.fillStyle=e,c!==t.fillStyle?null:(t.fillRect(0,0,1,1),Object(g.a)(t.getImageData(0,0,1,1).data))}))}();function N(e,t,c){return e<t?(t-e)*c+e:e-(e-t)*c}function R(e){for(var t=Object.keys(e).map((function(e){return parseInt(e)})).sort((function(e,t){return e<t?-1:e===t?0:1})),c=0,n=1,r={};n<t.length;){var a=t[c],o=t[n],l=S(e[a]);l||(l=[0,0,0]);var i=S(e[o]);i||(i=[0,0,0]);for(var s=a;s<=o;s++){for(var u=(s-a)/(o-a),d=[],j=0;j<3;j++)d[j]=Math.round(N(l[j],i[j],u));var b="#".concat(d[0].toString(16).padStart(2,"0"),d[1].toString(16).padStart(2,"0"),d[2].toString(16).padStart(2,"0"));r[s]=b}c++,n++}return r}var M=function e(t){var c=t.loadSculptPath,n=t.onUpdate,a=t.depth,o=t.orientation,l=C().config,s=Object(r.useState)(!1),u=Object(i.a)(s,2),f=u[0],O=u[1],p=Object(r.useState)(null),h=Object(i.a)(p,2),E=h[0],T=h[1],v=Object(r.useState)(null),m=Object(i.a)(v,2),g=m[0],x=m[1],y=0,S=1,N=2,M=Object(r.useRef)(y);Object(r.useEffect)((function(){-1===c&&f&&(T(-1),x(-1),O(!1)),"[object Array]"===Object.prototype.toString.call(c)&&M.current===y&&(M.current=S,O(!0),c.length>0&&(T(c[0]),c.length>1&&x(c[1])),M.current=N)}),[c]);var U=Object(r.useRef)([0]),k=Object(r.useRef)([]),w=Object(r.useRef)([]);function D(){U.current=f?[1].concat(k.current,w.current):[0],"[object Array]"===Object.prototype.toString.call(c)&&M.current===S||n(U.current)}Object(r.useEffect)((function(){D()}),[f,k,w,n]);var Y=["btap",o];0===a&&Y.push("base");var I=function(e,t){switch(e[j.PALETTE_TYPE]){case b.MONOCHROME:return e[j.DEFAULT_COLOR];case b.CYCLE:var c,n=e[j.PALETTE_NAME];if("custom"===n)c=P(e[j.CUSTOM_PALETTE],b.CYCLE).map((function(e){return e.colorCode}));else{if(!n||!Object.keys(_).includes(n))return console.log("ERROR: Unknown Cycle Palette name '".concat(n,"'")),null;c=_[n]}return c[t%c.length];case b.GRADIENT:var r,a=e[j.PALETTE_NAME];if("custom"===a)r=L(P(e[j.CUSTOM_PALETTE],b.GRADIENT));else{if(!a||!Object.keys(A).includes(a))return console.log("ERROR: Unknown Gradient Palette name '".concat(a,"'")),null;r=A[a]}var o=R(r);return Object.keys(o).map((function(e){return parseInt(e)})).includes(t)?o[t]:e[j.DEFAULT_COLOR];default:return null}}(l,a);return f?Object(d.jsxs)("div",{className:Y.join(" "),"data-depth":a,style:I?{backgroundColor:I}:null,children:[Object(d.jsx)(e,{depth:a+1,orientation:"h"===o?"v":"h",onUpdate:function(e){k.current=e,D()},loadSculptPath:E}),Object(d.jsx)(e,{depth:a+1,orientation:"h"===o?"v":"h",onUpdate:function(e){w.current=e,D()},loadSculptPath:g})]}):Object(d.jsx)("div",{className:Y.join(" "),onClick:function(){return O(!0)},"data-depth":a,style:I?{backgroundColor:I}:null})},U=c.p+"static/media/ftadd.17ed1b53.svg",k=c.p+"static/media/ftedit-remove.6b6c8a76.svg";var w=function(e){var t=e.type,c=C(),n=c.config,a=c.dispatch,o=Object(r.useState)(P(n[j.CUSTOM_PALETTE],t)),l=Object(i.a)(o,2),s=l[0],u=l[1],f=Object(r.useState)({}),O=Object(i.a)(f,2),p=O[0],h=O[1];Object(r.useEffect)((function(){var e=x(s,t);if("undefined"!==typeof e&&(a(T(j.CUSTOM_PALETTE,e)),E(j.CUSTOM_PALETTE,e),t===b.GRADIENT)){var c=L(s);h(R(c))}}),[s,t,a]);var v={colorCode:""};return Object(d.jsx)("div",{className:"custom-palette-creator",children:Object(d.jsxs)("table",{children:[Object(d.jsxs)("tr",{children:[s.map((function(e,t){return Object(d.jsxs)("th",{className:0===t?"first":null,children:[t,Object(d.jsx)("div",{className:"colorsample",style:{backgroundColor:e.colorCode?e.colorCode:(c=t,c in p?p[c]:null)}})]},"custpalcr_idx_".concat(t));var c})),Object(d.jsx)("th",{rowSpan:"3",children:Object(d.jsx)("button",{onClick:function(){s.push(v),u(Object(g.a)(s))},className:"add-entry",children:Object(d.jsx)("img",{src:U,alt:"Add palette entry to end"})})})]}),Object(d.jsx)("tr",{children:s.map((function(e,t){return Object(d.jsx)("td",{className:0===t?"first":null,children:Object(d.jsx)("input",{type:"text",value:e.colorCode,onChange:function(e){return function(e,t){s[e].colorCode=t,u(Object(g.a)(s))}(t,e.target.value)}})},"custpalcr_code_".concat(t))}))}),Object(d.jsx)("tr",{children:s.map((function(e,t){return Object(d.jsxs)("td",{className:0===t?"first":null,children:[Object(d.jsx)("button",{onClick:function(){return function(e){s.splice(e,0,v),u(Object(g.a)(s))}(t)},className:"add-before",children:Object(d.jsx)("img",{src:U,alt:"Add palette entry before this"})}),Object(d.jsx)("button",{onClick:function(){return function(e){s.splice(e,1),u(Object(g.a)(s))}(t)},className:"remove",children:Object(d.jsx)("img",{src:k,alt:"Remove this palette entry"})})]},"custpalcr_ops_".concat(t))}))})]})})};var D=function(e){var t,c=e.doSculpt,n=C(),r=n.config,a=n.dispatch;function o(e,t){switch(e){case j.DEFAULT_COLOR:document.documentElement.style.setProperty("--default-color",t);break;case j.PALETTE_TYPE:if(r[j.CUSTOM_PALETTE]&&[b.CYCLE,b.GRADIENT].includes(r[j.PALETTE_TYPE])&&[b.CYCLE,b.GRADIENT].includes(t)&&r[j.PALETTE_TYPE]!==t){var c=x(P(r[j.CUSTOM_PALETTE],r[j.PALETTE_TYPE]),t);a(T(j.CUSTOM_PALETTE,c)),E(j.CUSTOM_PALETTE,c)}break;case j.PALETTE_NAME:case j.GRADIENT_NAME:break;default:console.log("Unknown settings key: '".concat(e,"'"))}a(T(e,t)),E(e,t)}return Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{children:"Make it yours"}),Object(d.jsxs)("div",{id:"settings",children:[Object(d.jsxs)("div",{className:"setting",children:[Object(d.jsx)("label",{children:"Palette type:"}),Object(d.jsx)("div",{id:"palette-type-options",children:Object.entries({"Monochrome (use default color)":b.MONOCHROME,"Repeating cycle":b.CYCLE,Gradient:b.GRADIENT}).map((function(e){var t=Object(i.a)(e,2),c=t[0],n=t[1];return Object(d.jsxs)("div",{children:[Object(d.jsx)("input",{type:"radio",name:"palette_type",value:n,id:"palette_type_".concat(n),checked:r[j.PALETTE_TYPE]===n,onChange:function(e){return o(j.PALETTE_TYPE,e.target.value)}}),Object(d.jsx)("label",{htmlFor:"palette_type_".concat(n),children:c}),b.CYCLE===n&&r[j.PALETTE_TYPE]===n?Object(d.jsxs)("div",{id:"palette-options",children:[Object(d.jsx)("span",{className:"help",children:"Palette colors will cycle and repeat with depth."}),Object.entries(_).map((function(e){var t=Object(i.a)(e,2),c=t[0],a=t[1];return Object(d.jsxs)("div",{children:[Object(d.jsx)("input",{type:"radio",name:"palette",value:c,id:"palette_cycle_".concat(c),checked:r[j.PALETTE_NAME]===c,onChange:function(e){return o(j.PALETTE_NAME,e.target.value)}}),Object(d.jsx)("label",{htmlFor:"palette_cycle_".concat(c),children:"custom"===c?Object(d.jsx)("span",{children:"custom"}):a.map((function(e){return Object(d.jsx)("div",{className:"colorsample",style:{backgroundColor:e}},"palette_cycle_".concat(c,"_").concat(e.replace(/[^0-9a-zA-Z]/,"")))}))}),"custom"===c&&r[j.PALETTE_NAME]===c&&Object(d.jsx)(w,{type:n})]},"palette_cycle_".concat(c))}))]}):null,b.GRADIENT===n&&r[j.PALETTE_TYPE]===n?Object(d.jsxs)("div",{id:"gradient-options",children:[Object(d.jsx)("span",{className:"help",children:"Palette colors transition between two or more colors."}),Object.entries(A).map((function(e){var t=Object(i.a)(e,2),c=t[0],a=t[1];return Object(d.jsxs)("div",{children:[Object(d.jsx)("input",{type:"radio",name:"palette",value:c,id:"palette_gradient_".concat(c),checked:r[j.PALETTE_NAME]===c,onChange:function(e){return o(j.PALETTE_NAME,e.target.value)}}),Object(d.jsx)("label",{htmlFor:"palette_gradient_".concat(c),children:"custom"===c?Object(d.jsx)("span",{children:"custom"}):Object.entries(R(a)).map((function(e){var t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(d.jsx)("div",{className:"colorsample gradient",style:{backgroundColor:r}},"palette_gradient_".concat(c,"_").concat(n,"_").concat(r.replace(/[^0-9a-zA-Z]/,"")))}))}),"custom"===c&&r[j.PALETTE_NAME]===c&&Object(d.jsx)(w,{type:n})]},"palette_gradient_".concat(c))}))]}):null]},"palette_type_".concat(n))}))})]}),Object(d.jsxs)("div",{className:"setting",children:[Object(d.jsx)("label",{htmlFor:"default-color",children:"Default color:"}),Object(d.jsx)("input",{id:"default-color",type:"text",value:(t=j.DEFAULT_COLOR,Object.keys(r).includes(t)?r[t]:""),onChange:function(e){return o(j.DEFAULT_COLOR,e.target.value)}}),Object(d.jsx)("div",{id:"default-color-sample",className:"colorsample"}),Object(d.jsx)("br",{}),Object(d.jsx)("span",{className:"help",children:"Can be any valid HTML color name, or a code in #rgb or #rrggbb format."})]}),Object(d.jsx)("button",{onClick:c,children:"Let's Sculpt!"})]})]})};function Y(e,t){if(0===e.length)return[[0,0],[]];for(var c=[],n=0;n<2&&e.length>0;){var r=e.shift();if(n++,r){var a,o=Y(e,t+1),l=Object(i.a)(o,2);a=l[0],e=l[1],c.push(a)}else c.push(r)}return[c,e]}var I=function(){var e=C(),t=e.config,c=e.dispatch,n=3,a=2,o=1,l=Object(r.useState)(n),s=Object(i.a)(l,2),u=s[0],b=s[1],f=Object(r.useState)(null),O=Object(i.a)(f,2),p=O[0],v=O[1];function m(){b(o)}return Object(r.useEffect)((function(){var e=h();Object.entries(e).forEach((function(e){var t=Object(i.a)(e,2),n=t[0],r=t[1];Object.values(j).includes(n)&&c(T(n,r))})),e[j.SCULPT_PATH]&&t[j.SCULPT_PATH]!==e[j.SCULPT_PATH]&&(t[j.SCULPT_PATH]=e[j.SCULPT_PATH])}),[window.location.hash]),Object(r.useEffect)((function(){if(t[j.SCULPT_PATH]){var e=Y(function(e){for(var t=atob(e),c=[];t.length>0;){var n=t.substring(0,1);t=t.slice(1);for(var r=n.charCodeAt(0),a=7;a>=0;a--){var o=(r&Math.pow(2,a))>0?1:0;c.push(o)}}for(;0===c[c.length-1];)c.pop();return c}(t[j.SCULPT_PATH]),0),c=Object(i.a)(e,1)[0];c.length&&(console.log("starting replay"),m(),v(c[0]),console.log("window.performance.memory =",window.performance.memory))}}),[t[j.SCULPT_PATH]]),Object(d.jsx)("div",{className:"App",children:u===a?Object(d.jsxs)("div",{id:"main-menu",children:[Object(d.jsx)("h1",{children:"Le Menu"}),Object(d.jsx)("button",{onClick:m,children:"Sculpt!"}),Object(d.jsxs)("button",{onClick:function(){b(n)},children:["Configure",Object(d.jsx)("br",{}),"(Set your palette, etc.)"]}),Object(d.jsx)("a",{target:"_blank",rel:"noreferrer",className:"button",href:"https://github.com/benjaminbradley/pixelsculptor#readme",children:"About"})]}):Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{className:"canvasButtons",children:[Object(d.jsx)("button",{id:"goToMenu",onClick:function(){b(a)},children:"Menu"}),Object(d.jsx)("button",{onClick:function(){v(-1),setTimeout((function(){return v(null)}),10)},children:"Reset"})]}),u===n?Object(d.jsx)(D,{doSculpt:m}):Object(d.jsx)(M,{depth:0,orientation:"v",onUpdate:function(e){var t=function(e){for(var t="";e.length>0;){for(var c=e.splice(0,8),n=0,r=0;r<8&&r<c.length;r++){n+=c[r]*Math.pow(2,7-r)}t+=String.fromCharCode(n)}return btoa(t)}(e);E(j.SCULPT_PATH,t)},loadSculptPath:p})]})})},F=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,18)).then((function(t){var c=t.getCLS,n=t.getFID,r=t.getFCP,a=t.getLCP,o=t.getTTFB;c(e),n(e),r(e),a(e),o(e)}))};l.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(m,{children:Object(d.jsx)(I,{})})}),document.getElementById("root")),F()}},[[17,1,2]]]);
//# sourceMappingURL=main.b74abccb.chunk.js.map