{"version":3,"sources":["contexts/ConfigContext.js","lib/paletteTools.js","components/BinaryTreeArtPixel.js","assets/ftadd.svg","assets/ftedit-remove.svg","components/CustomPalette.js","components/Config.js","lib/binaryTools.js","App.js","reportWebVitals.js","index.js"],"names":["SETTINGS","CUSTOM_PALETTE","SCULPT_PATH","PALETTE_TYPE","PALETTE_NAME","DEFAULT_COLOR","PALETTE_TYPES","GRADIENT","CYCLE","MONOCHROME","initialState","ConfigContext","createContext","ACTIONS","parseUrl","window","location","hash","length","params","substring","split","forEach","pair","key","value","decodeURIComponent","updateUrl","setting_key","raw_value","newHash","Object","entries","map","encodeURIComponent","join","updateConfig","type","configReducer","state","action","ConfigProvider","props","useReducer","configData","config","dispatch","Provider","useConfigContext","useContext","PALETTES","custom","a","b","c","d","e","f","g","h","i","j","bw","GRADIENTS","0","15","6","5","10","gs","encodeCustomPalette","colorSet","colorCode","gradientDef","colorSetToGradientDef","k","v","console","log","decodeCustomPalette","customPaletteString","cc","gradEntry","index","color","memo_cache","colorToRGBA","canvas","document","createElement","width","height","ctx","getContext","factory","call","memoize","col","clearRect","fillStyle","computed","fillRect","getImageData","data","getBetween","init","final","percent","getGradientEntries","gradient_points","sortedDepthPoints","keys","parseInt","sort","minIdx","maxIdx","gradColors","minDepth","maxDepth","initialColor","finalColor","colorPoint","Math","round","concat","toString","padStart","BinaryTreeArtPixel","loadSculptPath","onUpdate","depth","orientation","useState","setSplit","c1LoadSculptPath","setC1LoadSculptPath","c2LoadSculptPath","setC2LoadSculptPath","LOADSTATE","loadState","useRef","useEffect","prototype","current","dfsp","c1","c2","updateDfsp","classNames","push","bg","curPalette","curPaletteName","includes","curGradient","gradPaletteName","getColor","className","data-depth","style","backgroundColor","bitstream","onClick","CustomPalette","setColorSet","curGradientEntries","setGradientEntries","newEntry","rowSpan","src","addIcon","alt","ce","onChange","newCode","updateColor","target","splice","addEntryAt","delEntryAt","delIcon","Config","doSculpt","myUpdateConfig","documentElement","setProperty","newCustomPalette","GRADIENT_NAME","id","label","name","checked","htmlFor","palette_name","palette_colors","replace","gradient_name","parseBitStream","sculptPath","cellCount","thisBit","shift","childPath","App","configDispatch","VIEWS","currentView","setCurrentView","loadedSculptPath","setLoadedSculptPath","values","base64","binaryData","atob","bitArray","byte","slice","byteInt","charCodeAt","bit","pop","base64toBitArray","performance","memory","rel","href","setTimeout","eightbits","String","fromCharCode","btoa","bitArrayToBase64","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.28592ff5.chunk.js","sourcesContent":["import { createContext, useReducer, useContext } from 'react';\n\nexport const SETTINGS = {\n  CUSTOM_PALETTE: 'cp',\n  SCULPT_PATH: 's',\n  PALETTE_TYPE: 'pt',\n  PALETTE_NAME: 'p',\n  DEFAULT_COLOR: 'd'\n};\n\nexport const PALETTE_TYPES = {\n  GRADIENT: 'g',\n  CYCLE: 'c',\n  MONOCHROME: 'm'\n};\n\n// Initial state\nconst initialState = {\n  [SETTINGS.PALETTE_TYPE]: PALETTE_TYPES.GRADIENT,\n  [SETTINGS.PALETTE_NAME]: 'gs',\n  [SETTINGS.DEFAULT_COLOR]: '#ddd'\n};\n\nexport const ConfigContext = createContext();\n\nexport const ACTIONS = {\n  UPDATE:1\n};\n\nexport function parseUrl() {\n  if (window.location.hash.length === 0) return {};\n  const params={};\n  window.location.hash.substring(1).split('&').forEach(pair => {\n    const [key, value] = pair.split('=');\n    if (value.length)\n      params[key] = decodeURIComponent(value);\n  });\n  return params;\n}\n\nexport function updateUrl(setting_key, raw_value) {\n  const params = parseUrl();\n  params[setting_key] = raw_value;\n  const newHash = Object.entries(params).map(\n    ([key,value]) => `${key}=${encodeURIComponent(value)}`\n  ).join('&');\n  window.location.hash = newHash;\n}\n\n// Action creators\nexport function updateConfig(key, value) {\n  return { type: ACTIONS.UPDATE, key, value };\n}\n\n// Reducer\nexport const configReducer = (state, action) => {\n  switch (action.type) {\n    case ACTIONS.UPDATE:\n      return { ...state, [action.key]: action.value };\n    default:\n      return state;\n  }\n}\n\nfunction ConfigProvider(props) {\n  const [config, dispatch] = useReducer(configReducer, initialState);\n  const configData = { config, dispatch };\n  return <ConfigContext.Provider value={configData} {...props} />;\n}\n\nfunction useConfigContext() {\n  return useContext(ConfigContext);\n}\n\nexport { ConfigProvider, useConfigContext };\n","import { SETTINGS, PALETTE_TYPES } from '../contexts/ConfigContext';\n\nexport const PALETTES = {\n  custom: [],\n  a: ['#b2b2b2', '#50394c', '#f4e1d2', '#ffef96'],\n  b: ['#80ced6', '#d5f4e6', '#fefbd8', '#618685'],\n  c: ['#034f84', '#92a8d1', '#f7cac9', '#f7786b'],\n  d: ['#4040a1', '#36486b', '#618685', '#fefbd8'],\n  e: ['#6b5b95', '#878f99', '#a2b9bc', '#b2ad7f'],\n  f: ['#622569', '#b8a9c9', '#d6d4e0', '#5b9aa0'],\n  g: ['#c83349', '#e06377', '#eeac99', '#f9d5e5'],\n  h: ['#ff7b25', '#d64161', '#6b5b95', '#feb236'],\n  i: ['#d96459', '#f2ae72', '#588c7e', '#f2e394'],\n  j: ['#b2ad7f', '#878f99', '#a2b9bc', '#6b5b95'],\n  bw: ['#fff', '#000']\n};\n\nexport const GRADIENTS = {\n  custom: {},\n  a: {\n    0: '#fefbd8',\n    15: '#4040a1'\n  },\n  b: {\n    0: '#f9d5e5',\n    15: '#c83349'\n  },\n  c: {\n    0: '#80ced6',\n    6: '#622569',\n    15: '#000'\n  },\n  d: {\n    0: '#f00',\n    5: '#0f0',\n    10: '#00f',\n    15: '#f00'\n  },\n  e: {\n    0: '#0f0',\n    5: '#00f',\n    10: '#f00',\n    15: '#0f0'\n  },\n  f: {\n    0: '#00f',\n    5: '#f00',\n    10: '#0f0',\n    15: '#00f'\n  },\n  gs: {\n    0: '#fff',\n    15: '#000'\n  }\n}\n\n// serialize a colorSet to string\nexport function encodeCustomPalette(colorSet, type) {\n  if (type === PALETTE_TYPES.CYCLE) {\n    return colorSet.map(e => e.colorCode).join(',')\n  } else if (type === PALETTE_TYPES.GRADIENT) {\n    const gradientDef = colorSetToGradientDef(colorSet);\n    return Object.entries(gradientDef).map(([k,v]) => `${k}:${v}`).join(',')\n  }\n  console.log(`ERROR: Unknown CustomPalette type: '${type}'`);\n  return null;\n}\n\n// deserialize a string to colorSet structure\nexport function decodeCustomPalette(customPaletteString, type) {\n  if (!customPaletteString) return [];\n  if (type === PALETTE_TYPES.CYCLE) {\n    return customPaletteString.split(',').map(cc => ({colorCode: cc}));\n  } else if (type === PALETTE_TYPES.GRADIENT) {\n    const colorSet = [];\n    customPaletteString.split(',').forEach(gradEntry => {\n      const [ index, color ] = gradEntry.split(':');\n      colorSet[index] = {colorCode: color};\n    });\n    // fill empty entries\n    for (let i=0; i<colorSet.length; i++) {\n      if (!colorSet[i]) colorSet[i] = {colorCode:''};\n    }\n    return colorSet;\n  }\n  console.log(`ERROR: Unknown CustomPalette type: '${type}'`);\n  return null;\n}\n\nexport function colorSetToGradientDef(colorSet) {\n  // convert colorSet (array of objects w/ colorCode attribute) to gradientDef (object w/ depth indices/colorCode values)\n  const gradientDef = {};\n  for (let i=0; i<colorSet.length; i++) {\n    if (colorSet[i] && 'colorCode' in colorSet[i] && colorSet[i].colorCode) {\n      gradientDef[i] = colorSet[i].colorCode;\n    }\n  }\n  return gradientDef;\n}\n\n//TODO: memoize\nexport function getColor(config, depth) {\n  switch (config[SETTINGS.PALETTE_TYPE]) {\n    case PALETTE_TYPES.MONOCHROME:\n      return config[SETTINGS.DEFAULT_COLOR];\n    case PALETTE_TYPES.CYCLE:\n      const curPaletteName = config[SETTINGS.PALETTE_NAME];\n      let curPalette;\n      if (curPaletteName === 'custom') {\n        const customPalette = decodeCustomPalette(config[SETTINGS.CUSTOM_PALETTE], PALETTE_TYPES.CYCLE);\n        curPalette = customPalette.map(e => e.colorCode);\n      } else if (curPaletteName && Object.keys(PALETTES).includes(curPaletteName)) {\n        curPalette = PALETTES[curPaletteName];\n      } else {\n        console.log(`ERROR: Unknown Cycle Palette name '${curPaletteName}'`)\n        return null;\n      }\n      const palIdx = depth % curPalette.length;\n      return curPalette[palIdx];\n      // eslint-disable-next-line no-fallthrough\n    case PALETTE_TYPES.GRADIENT:\n      const gradPaletteName = config[SETTINGS.PALETTE_NAME];\n      let curGradient;\n      if (gradPaletteName === 'custom') {\n        const colorSet = decodeCustomPalette(config[SETTINGS.CUSTOM_PALETTE], PALETTE_TYPES.GRADIENT);\n        curGradient = colorSetToGradientDef(colorSet);\n      } else if (gradPaletteName && Object.keys(GRADIENTS).includes(gradPaletteName)) {\n        curGradient = GRADIENTS[gradPaletteName];\n      } else {\n        console.log(`ERROR: Unknown Gradient Palette name '${gradPaletteName}'`)\n        return null;\n      }\n      const gradColors = getGradientEntries(curGradient);\n      if (Object.keys(gradColors).map(i=>parseInt(i)).includes(depth)) return gradColors[depth];\n      return config[SETTINGS.DEFAULT_COLOR];\n      // eslint-disable-next-line no-fallthrough\n    default:\n      return null;\n  }\n}\n\n\n// Thanks, Alnitak! https://stackoverflow.com/questions/11068240/what-is-the-most-efficient-way-to-parse-a-css-color-in-javascript\nconst memo_cache={};\nfunction memoize(factory, ctx) {\n  return function(key) {\n    if (!(key in memo_cache)) {\n      memo_cache[key] = factory.call(ctx, key);\n    }\n    return memo_cache[key];\n  };\n};\n\nconst colorToRGBA = (function() {\n  var canvas = document.createElement('canvas');\n  canvas.width = canvas.height = 1;\n  var ctx = canvas.getContext('2d');\n\n  return memoize(function(col) {\n      ctx.clearRect(0, 0, 1, 1);\n      ctx.fillStyle = '#000';\n      ctx.fillStyle = col;\n      var computed = ctx.fillStyle;\n      ctx.fillStyle = '#fff';\n      ctx.fillStyle = col;\n      if (computed !== ctx.fillStyle) {\n          return null; // invalid color\n      }\n      ctx.fillRect(0, 0, 1, 1);\n      return [ ...ctx.getImageData(0, 0, 1, 1).data ];\n  });\n})();\n\nfunction getBetween(init, final, percent) {\n  if (init < final) {\n    return (final-init) * percent + init;\n  } else {\n    return init - (init-final) * percent;\n  }\n}\n\n//TODO: memoize\nexport function getGradientEntries(gradient_points) {\n  const sortedDepthPoints = Object.keys(gradient_points).map(i=>parseInt(i))\n  .sort((a,b) => { return (a < b ? -1 : (a === b ? 0 : 1))});\n  let minIdx = 0;\n  let maxIdx = 1;\n  const gradColors = {};\n  while (maxIdx < sortedDepthPoints.length) {\n    let minDepth = sortedDepthPoints[minIdx];\n    let maxDepth = sortedDepthPoints[maxIdx];\n    let initialColor = colorToRGBA(gradient_points[minDepth]);\n    if (!initialColor) initialColor = [0,0,0];  // use a default for invalid values\n    let finalColor = colorToRGBA(gradient_points[maxDepth]);\n    if (!finalColor) finalColor = [0,0,0];  // use a default for invalid values\n    for (let i=minDepth; i<=maxDepth; i++) {\n      const percent = (i-minDepth)/(maxDepth-minDepth);\n      const colorPoint = [];\n      for (let j=0; j<3; j++) {\n        colorPoint[j] = Math.round(getBetween(initialColor[j], finalColor[j], percent));\n      }\n      const c = '#'.concat(\n        colorPoint[0].toString(16).padStart(2, '0'),\n        colorPoint[1].toString(16).padStart(2, '0'),\n        colorPoint[2].toString(16).padStart(2, '0')\n      );\n      gradColors[i] = c;\n    }\n    minIdx++;\n    maxIdx++;\n  }\n  return gradColors;\n}\n","import { useState, useEffect, useRef } from 'react';\nimport { useConfigContext } from '../contexts/ConfigContext';\nimport { getColor } from '../lib/paletteTools';\n\nfunction BinaryTreeArtPixel({\n  loadSculptPath,\n  onUpdate,\n  depth,\n  orientation\n}) {\n  const { config } = useConfigContext();\n  const [ split, setSplit ] = useState(false);\n  const [c1LoadSculptPath, setC1LoadSculptPath] = useState(null);\n  const [c2LoadSculptPath, setC2LoadSculptPath] = useState(null);\n  const LOADSTATE = {NA:0, LOADING:1, DONE:2};\n  const loadState = useRef(LOADSTATE.NA);\n\n  useEffect(() => {\n    if (loadSculptPath === -1 && split) {\n      // propagate reset action\n      setC1LoadSculptPath(-1);\n      setC2LoadSculptPath(-1);\n      setSplit(false);\n    }\n    if (Object.prototype.toString.call( loadSculptPath ) === '[object Array]' && loadState.current === LOADSTATE.NA) {\n      // propagate load action\n      loadState.current = LOADSTATE.LOADING;\n      setSplit(true);\n      if (loadSculptPath.length > 0) {\n        setC1LoadSculptPath(loadSculptPath[0]);\n        if (loadSculptPath.length > 1)\n          setC2LoadSculptPath(loadSculptPath[1]);\n      }\n      loadState.current = LOADSTATE.DONE;\n    }\n  }, [loadSculptPath]);\n  const dfsp = useRef([0]);\n  const c1 = useRef([]);\n  const c2 = useRef([]);\n  function updateDfsp() {\n    if (split) {\n      dfsp.current = [1].concat(c1.current, c2.current);\n    } else {\n      dfsp.current = [0];\n    }\n    // if loading, don't propagate upwards\n    if (Object.prototype.toString.call( loadSculptPath ) === '[object Array]' && loadState.current === LOADSTATE.LOADING) return;\n    onUpdate(dfsp.current);\n  }\n  useEffect(() => {\n    updateDfsp();\n  }, [split, c1, c2, onUpdate]);\n  function updateC1(bitstream) {\n    c1.current = bitstream;\n    updateDfsp();\n  }\n  function updateC2(bitstream) {\n    c2.current = bitstream;\n    updateDfsp();\n  }\n\n  const classNames=['btap', orientation];\n  if (depth === 0) classNames.push('base');\n\n  const bg = getColor(config, depth);\n\n  return (!split ?\n    <div className={classNames.join(' ')}\n      onClick={() => setSplit(true)}\n      data-depth={depth}\n      style={bg ? {backgroundColor: bg} : null}\n    />\n  :\n    <div className={classNames.join(' ')}\n      data-depth={depth}\n      style={bg ? {backgroundColor: bg} : null}\n    >\n        <BinaryTreeArtPixel\n          depth={depth+1}\n          orientation={orientation === 'h' ? 'v' : 'h'}\n          onUpdate={updateC1}\n          loadSculptPath={c1LoadSculptPath}\n        />\n        <BinaryTreeArtPixel\n          depth={depth+1}\n          orientation={orientation === 'h' ? 'v' : 'h'}\n          onUpdate={updateC2}\n          loadSculptPath={c2LoadSculptPath}\n        />\n    </div>\n  );\n}\n\nexport default BinaryTreeArtPixel;\n","export default __webpack_public_path__ + \"static/media/ftadd.17ed1b53.svg\";","export default __webpack_public_path__ + \"static/media/ftedit-remove.6b6c8a76.svg\";","import { useState, useEffect } from 'react';\nimport { useConfigContext, SETTINGS, PALETTE_TYPES, updateConfig, updateUrl } from '../contexts/ConfigContext';\nimport { encodeCustomPalette, decodeCustomPalette, getGradientEntries, colorSetToGradientDef } from '../lib/paletteTools';\nimport addIcon from '../assets/ftadd.svg';\nimport delIcon from '../assets/ftedit-remove.svg';\n\nfunction CustomPalette({\n  type\n}) {\n  const { config, dispatch } = useConfigContext();\n  const [ colorSet, setColorSet ] = useState(\n    decodeCustomPalette(config[SETTINGS.CUSTOM_PALETTE], type)\n  );\n  const [ curGradientEntries, setGradientEntries ] = useState({});\n\n  // When colorSet changes, update ConfigContext and URL\n  useEffect(() => {\n    const customPaletteString = encodeCustomPalette(colorSet, type);\n    if (typeof customPaletteString === 'undefined') return;\n    // store value in context\n    dispatch(updateConfig(SETTINGS.CUSTOM_PALETTE, customPaletteString));\n    updateUrl(SETTINGS.CUSTOM_PALETTE, customPaletteString);\n    if (type === PALETTE_TYPES.GRADIENT) {\n      const gradientDef = colorSetToGradientDef(colorSet)\n      setGradientEntries(getGradientEntries(gradientDef));\n    }\n  }, [colorSet, type, dispatch]);\n\n  function updateColor(i, newCode) {\n    colorSet[i].colorCode = newCode;\n    setColorSet([...colorSet]);\n  }\n\n  const newEntry = {colorCode:''};\n\n  function addEntryToEnd() {\n    colorSet.push(newEntry);\n    setColorSet([...colorSet]);\n  }\n\n  function addEntryAt(i) {\n    colorSet.splice(i, 0, newEntry);\n    setColorSet([...colorSet]);\n  }\n\n  function delEntryAt(i) {\n    colorSet.splice(i, 1);\n    setColorSet([...colorSet]);\n  }\n\n  function getGradColor(depth) {\n    if (depth in curGradientEntries) return curGradientEntries[depth];\n    return null;\n  }\n\n  return (\n    <div className='custom-palette-creator'>\n      <table>\n        <tr>\n          {colorSet.map((e,i) =>\n            <th key={`custpalcr_idx_${i}`} className={i===0 ? 'first' : null}>\n              {i}\n              <div className='colorsample' style={{backgroundColor: (e.colorCode ? e.colorCode : getGradColor(i))}} />\n            </th>\n          )}\n          <th rowSpan=\"3\"><button onClick={addEntryToEnd} className=\"add-entry\"><img src={addIcon} alt=\"Add palette entry to end\"/></button></th>\n        </tr>\n        <tr>\n          {colorSet.map((ce,i) =>\n            <td key={`custpalcr_code_${i}`} className={i===0 ? 'first' : null}>\n              <input type='text' value={ce.colorCode} onChange={(e) => updateColor(i, e.target.value)}/>\n            </td>\n          )}\n        </tr>\n        <tr>\n          {colorSet.map((e,i) =>\n            <td key={`custpalcr_ops_${i}`} className={i===0 ? 'first' : null}>\n              <button onClick={() => addEntryAt(i)} className=\"add-before\"><img src={addIcon} alt=\"Add palette entry before this\"/></button>\n              <button onClick={() => delEntryAt(i)} className=\"remove\"><img src={delIcon} alt=\"Remove this palette entry\"/></button>\n            </td>\n          )}\n        </tr>\n      </table>\n    </div>\n  );\n}\n\nexport default CustomPalette;\n","import { useConfigContext, updateConfig, SETTINGS, updateUrl, PALETTE_TYPES } from '../contexts/ConfigContext';\nimport CustomPalette from './CustomPalette';\nimport { PALETTES, GRADIENTS, getGradientEntries, decodeCustomPalette, encodeCustomPalette } from '../lib/paletteTools';\n\nfunction Config({doSculpt}) {\n  const { config, dispatch } = useConfigContext();\n  function myUpdateConfig(k,v) {\n    // side effects: update CSS, etc.\n    switch(k) {\n      case SETTINGS.DEFAULT_COLOR:\n        document.documentElement.style.setProperty('--default-color', v);\n        break;\n      case SETTINGS.PALETTE_TYPE:\n        // if custom palette is non-blank, and switching between cycle/gradient, convert the format\n        if ( config[SETTINGS.CUSTOM_PALETTE]\n          && [PALETTE_TYPES.CYCLE, PALETTE_TYPES.GRADIENT].includes(config[SETTINGS.PALETTE_TYPE])\n          && [PALETTE_TYPES.CYCLE, PALETTE_TYPES.GRADIENT].includes(v)\n          && config[SETTINGS.PALETTE_TYPE] !== v\n        ) {\n          const oldColorSet = decodeCustomPalette(config[SETTINGS.CUSTOM_PALETTE], config[SETTINGS.PALETTE_TYPE]);\n          const newCustomPalette = encodeCustomPalette(oldColorSet, v);\n          dispatch(updateConfig(SETTINGS.CUSTOM_PALETTE, newCustomPalette));\n          updateUrl(SETTINGS.CUSTOM_PALETTE, newCustomPalette);\n        }\n        break;\n      case SETTINGS.PALETTE_NAME:\n      case SETTINGS.GRADIENT_NAME:\n        break;\n      default:\n        console.log(`Unknown settings key: '${k}'`);\n    }\n    // store value in context\n    dispatch(updateConfig(k,v));\n    updateUrl(k, v);\n  }\n  function getValue(key) {\n    if (Object.keys(config).includes(key)) return config[key];\n    return '';\n  }\n  return (\n    <div>\n      <h1>Make it yours</h1>\n      <div id='settings'>\n        <div className='setting'>\n          <label>Palette type:</label>\n          <div id='palette-type-options'>\n            {Object.entries({\n              'Monochrome (use default color)': PALETTE_TYPES.MONOCHROME,\n              'Repeating cycle': PALETTE_TYPES.CYCLE,\n              'Gradient': PALETTE_TYPES.GRADIENT\n            }).map(([label, key]) =>\n              <div key={`palette_type_${key}`}>\n                <input type='radio' name='palette_type' value={key} id={`palette_type_${key}`}\n                  checked={config[SETTINGS.PALETTE_TYPE] === key}\n                  onChange={(e) => myUpdateConfig(SETTINGS.PALETTE_TYPE, e.target.value)}\n                />\n                <label htmlFor={`palette_type_${key}`}>{label}</label>\n                  {PALETTE_TYPES.CYCLE === key && config[SETTINGS.PALETTE_TYPE] === key ?\n                    <div id='palette-options'>\n                      <span className='help'>Palette colors will cycle and repeat with depth.</span>\n                      {Object.entries(PALETTES).map(([palette_name, palette_colors]) => (\n                        <div key={`palette_cycle_${palette_name}`}>\n                          <input type='radio' name='palette' value={palette_name} id={`palette_cycle_${palette_name}`}\n                            checked={config[SETTINGS.PALETTE_NAME] === palette_name}\n                            onChange={(e) => myUpdateConfig(SETTINGS.PALETTE_NAME, e.target.value)}\n                          />\n                          <label htmlFor={`palette_cycle_${palette_name}`}>\n                            {palette_name === 'custom' ?\n                              <span>custom</span>\n                            : palette_colors.map(c => (\n                              <div className='colorsample' style={{backgroundColor: c}} key={`palette_cycle_${palette_name}_${c.replace(/[^0-9a-zA-Z]/, '')}`}/>\n                            ))}\n                          </label>\n                          {palette_name === 'custom' && config[SETTINGS.PALETTE_NAME] === palette_name && (\n                            <CustomPalette\n                              type={key}\n                            />\n                          )}\n                        </div>\n                      ))}\n                    </div>                      \n                  : null}\n                  {PALETTE_TYPES.GRADIENT === key && config[SETTINGS.PALETTE_TYPE] === key ?\n                    <div id='gradient-options'>\n                      <span className='help'>Palette colors transition between two or more colors.</span>\n                      {Object.entries(GRADIENTS).map(([gradient_name, gradient_points]) => (\n                        <div key={`palette_gradient_${gradient_name}`}>\n                          <input type='radio' name='palette' value={gradient_name} id={`palette_gradient_${gradient_name}`}\n                            checked={config[SETTINGS.PALETTE_NAME] === gradient_name}\n                            onChange={(e) => myUpdateConfig(SETTINGS.PALETTE_NAME, e.target.value)}\n                          />\n                          <label htmlFor={`palette_gradient_${gradient_name}`}>\n                            {gradient_name === 'custom' ?\n                              <span>custom</span>\n                            : Object.entries(getGradientEntries(gradient_points)).map(([d,c]) => (\n                              <div className='colorsample gradient' style={{backgroundColor: c}} key={`palette_gradient_${gradient_name}_${d}_${c.replace(/[^0-9a-zA-Z]/, '')}`}/>\n                            ))}\n                          </label>\n                          {gradient_name === 'custom' && config[SETTINGS.PALETTE_NAME] === gradient_name && (\n                            <CustomPalette\n                              type={key}\n                            />\n                          )}\n                        </div>\n                      ))}\n                    </div>\n                  : null}\n              </div>\n            )}\n          </div>\n        </div>\n        <div className='setting'>\n          <label htmlFor='default-color'>Default color:</label>\n          <input id='default-color' type='text' value={getValue(SETTINGS.DEFAULT_COLOR)} onChange={(e) => myUpdateConfig(SETTINGS.DEFAULT_COLOR, e.target.value)}/>\n          <div id='default-color-sample' className='colorsample'/>\n          <br/><span className='help'>Can be any valid HTML color name, or a code in #rgb or #rrggbb format.</span>\n        </div>\n        <button onClick={doSculpt}>{`Let's Sculpt!`}</button>\n      </div>\n    </div>\n  );\n}\n\nexport default Config;\n","const DEBUG_BINARYTOOLS = false;\n\nexport function bitArrayToBase64(bitArray) {\n  if (DEBUG_BINARYTOOLS) console.log(\"bitArrayToBase64, got bitArray=\",bitArray);\n  // convert bitstream to binary data\n  let binaryData = '';\n  while (bitArray.length > 0) {\n    // get the next 8 bits\n    const eightbits = bitArray.splice(0, 8);\n    if (DEBUG_BINARYTOOLS) console.log(\"spliced: \",eightbits);\n    // convert these 8 bits to a byte\n    let byte=0;\n    for (let i=0; i<8 && i<eightbits.length; i++) {\n      const n = eightbits[i] * 2**(7-i);\n      byte += n;\n      if (DEBUG_BINARYTOOLS) console.log(`Adding ${eightbits[i]} * (2**(7-${i})=${2**(7-i)}) }=${n} to byte, now=${byte}`);\n    }\n    binaryData += String.fromCharCode(byte);\n    if (DEBUG_BINARYTOOLS) console.log(`Appending byte ${byte} to binaryData,  now='${binaryData}'`);\n  }\n  // convert binary data to base64 string\n  const base64 = btoa(binaryData);\n  if (DEBUG_BINARYTOOLS) console.log(`returning base64='${base64}'`);\n  return base64;\n}\n\nexport function base64toBitArray(base64) {\n  if (DEBUG_BINARYTOOLS) console.log(`base64toBitArray, got base64='${base64}'`);\n  let binaryData = atob(base64);\n  if (DEBUG_BINARYTOOLS) console.log(`binaryData='${binaryData}'`);\n  let bitArray=[];\n  while (binaryData.length > 0) {\n    // Shift off the next byte of the string\n    const byte = binaryData.substring(0,1);\n    binaryData = binaryData.slice(1);\n    if (DEBUG_BINARYTOOLS) console.log(`Looking at next byte='${byte}'`)\n    const byteInt = byte.charCodeAt(0);\n    if (DEBUG_BINARYTOOLS) console.log(`next byte numerical value is ${byteInt}`);\n    for (let i=7; i>=0; i--) {\n      const bit = (byteInt & (2**i)) > 0 ? 1 : 0;\n      bitArray.push(bit);\n      if (DEBUG_BINARYTOOLS) console.log(`Adding ${bit} to the bitArray`);\n    }\n  }\n  // trim 0s from the trailing end\n  while (bitArray[bitArray.length-1] === 0) bitArray.pop();\n  if (DEBUG_BINARYTOOLS) console.log(\"Returning bitArray=\",bitArray);\n  return bitArray;\n}\n\nexport function parseBitStream(bitstream, depth) {\n  if (bitstream.length === 0) return [[0,0], []];\n  if (DEBUG_BINARYTOOLS) console.log(\"\\t\".repeat(depth)+\"parseBitStream:\",bitstream)\n  const sculptPath = [];\n  let cellCount = 0;\n  while (cellCount < 2 && bitstream.length > 0) {\n    // Shift off the first element for myself\n    const thisBit = bitstream.shift();\n    if (DEBUG_BINARYTOOLS) console.log(\"\\t\".repeat(depth)+`parseBitStream: (processing ${thisBit})`);\n    cellCount++;\n    if (thisBit) {\n      let childPath;\n      [childPath, bitstream] = parseBitStream(bitstream, depth+1);\n      if (DEBUG_BINARYTOOLS) console.log(\"\\t\".repeat(depth)+\"parseBitStream: adding child path\",childPath);\n      sculptPath.push(childPath);\n    } else {\n      sculptPath.push(thisBit);\n    }\n  }\n  if (DEBUG_BINARYTOOLS) console.log(\"\\t\".repeat(depth)+\"parseBitStream returning sculptPath:\",sculptPath,\", and remainder=\",bitstream);\n  return [sculptPath, bitstream];\n}\n","import { useState, useEffect } from 'react';\nimport './App.css';\nimport BinaryTreeArtPixel from './components/BinaryTreeArtPixel.js';\nimport { useConfigContext, updateConfig, SETTINGS, parseUrl, updateUrl } from './contexts/ConfigContext';\nimport Config from './components/Config.js';\nimport { bitArrayToBase64, base64toBitArray, parseBitStream } from './lib/binaryTools.js';\n\nfunction App() {\n  const { config, dispatch: configDispatch } = useConfigContext();\n  const VIEWS={\n    CONFIG:3,\n    MENU:2,\n    SCULPT:1\n  };\n  const [currentView, setCurrentView] = useState(VIEWS.CONFIG);\n  const [loadedSculptPath, setLoadedSculptPath] = useState(null);\n  useEffect(() => {\n    const params = parseUrl();\n    // load config\n    Object.entries(params).forEach( ([key,value]) => {\n      if (Object.values(SETTINGS).includes(key)) {\n        configDispatch(updateConfig(key, value));\n      }\n    });\n    // Process sculpt path in URL\n    if (params[SETTINGS.SCULPT_PATH] && config[SETTINGS.SCULPT_PATH] !== params[SETTINGS.SCULPT_PATH]) {\n      config[SETTINGS.SCULPT_PATH] = params[SETTINGS.SCULPT_PATH];\n    }\n  },[window.location.hash]);\n  useEffect(() => {\n    if (!config[SETTINGS.SCULPT_PATH]) return;\n    const bitstream = base64toBitArray(config[SETTINGS.SCULPT_PATH]);\n    // replay loaded sculptpath\n    const [sculptPath] = parseBitStream(bitstream, 0);\n    //console.log(\"Parsed bitstream is:\",sculptPath);\n    if (sculptPath.length) {\n      console.log(\"starting replay\");\n      doSculpt();\n      setLoadedSculptPath(sculptPath[0]);\n      console.log(\"window.performance.memory =\",window.performance.memory);\n    }\n  }, [config[SETTINGS.SCULPT_PATH]])\n\n  function doMEnu() {\n    setCurrentView(VIEWS.MENU);\n  }\n  function doConfig() {\n    setCurrentView(VIEWS.CONFIG);\n  }\n  function doSculpt() {\n    setCurrentView(VIEWS.SCULPT);\n  }\n  function updateSculptPath(bitstream) {\n    const base64 = bitArrayToBase64(bitstream);\n    updateUrl(SETTINGS.SCULPT_PATH, base64)\n  }\n  function resetSculpture() {\n    setLoadedSculptPath(-1);\n    setTimeout(() => setLoadedSculptPath(null), 10);\n  }\n  return (\n    <div className=\"App\">\n      {currentView === VIEWS.MENU ?\n        <div id=\"main-menu\">\n          <h1>Le Menu</h1>\n          <button onClick={doSculpt}>Sculpt!</button>\n          <button onClick={doConfig}>\n            Configure<br/>\n            (Set your palette, etc.)\n          </button>\n          <a target=\"_blank\" rel=\"noreferrer\" className='button' href=\"https://github.com/benjaminbradley/pixelsculptor#readme\">About</a>\n        </div>\n      :\n        <div>\n          <div className='canvasButtons'>\n            <button id='goToMenu' onClick={doMEnu}>Menu</button>\n            <button onClick={resetSculpture}>Reset</button>\n          </div>\n          {currentView === VIEWS.CONFIG?\n            <Config\n              doSculpt={doSculpt}\n            />\n          :\n            <BinaryTreeArtPixel\n              depth={0}\n              orientation={'v'}\n              onUpdate={updateSculptPath}\n              loadSculptPath={loadedSculptPath}\n            />\n          }\n        </div>\n      }\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { ConfigProvider } from './contexts/ConfigContext';\n\nReactDOM.render(\n  <React.StrictMode>\n    <ConfigProvider>\n      <App />\n    </ConfigProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}