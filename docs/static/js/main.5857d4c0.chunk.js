(this.webpackJsonppixelsculptor=this.webpackJsonppixelsculptor||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var c,a=n(1),r=n.n(a),o=n(9),l=n.n(o),i=(n(14),n(2)),s=(n(15),n(6)),u=n(3),b=n(0),d={SCULPT_PATH:"s",PALETTE_TYPE:"pt",PALETTE_NAME:"p",DEFAULT_COLOR:"d"},j="g",f="c",p="m",O=(c={},Object(u.a)(c,d.PALETTE_TYPE,j),Object(u.a)(c,d.PALETTE_NAME,"gs"),Object(u.a)(c,d.DEFAULT_COLOR,"#ddd"),c),h=Object(a.createContext)(),v=1;function g(){if(0===window.location.hash.length)return{};var e={};return window.location.hash.substring(1).split("&").forEach((function(t){var n=t.split("="),c=Object(i.a)(n,2),a=c[0],r=c[1];e[a]=decodeURIComponent(r)})),e}function E(e,t){var n=g();n[e]=t;var c=Object.entries(n).map((function(e){var t=Object(i.a)(e,2),n=t[0],c=t[1];return"".concat(n,"=").concat(encodeURIComponent(c))})).join("&");window.location.hash=c}function m(e,t){return{type:v,key:e,value:t}}var T=function(e,t){switch(t.type){case v:return Object(s.a)(Object(s.a)({},e),{},Object(u.a)({},t.key,t.value));default:return e}};function x(e){var t=Object(a.useReducer)(T,O),n=Object(i.a)(t,2),c={config:n[0],dispatch:n[1]};return Object(b.jsx)(h.Provider,Object(s.a)({value:c},e))}function y(){return Object(a.useContext)(h)}var _=n(7),A={a:["#b2b2b2","#50394c","#f4e1d2","#ffef96"],b:["#80ced6","#d5f4e6","#fefbd8","#618685"],c:["#034f84","#92a8d1","#f7cac9","#f7786b"],d:["#4040a1","#36486b","#618685","#fefbd8"],e:["#6b5b95","#878f99","#a2b9bc","#b2ad7f"],f:["#622569","#b8a9c9","#d6d4e0","#5b9aa0"],g:["#c83349","#e06377","#eeac99","#f9d5e5"],h:["#ff7b25","#d64161","#6b5b95","#feb236"],i:["#d96459","#f2ae72","#588c7e","#f2e394"],j:["#b2ad7f","#878f99","#a2b9bc","#6b5b95"],bw:["#fff","#000"]},P={a:{0:"#fefbd8",15:"#4040a1"},b:{0:"#f9d5e5",15:"#c83349"},gs:{0:"#fff",15:"#000"}};var C={};var L=function(){var e=document.createElement("canvas");e.width=e.height=1;var t=e.getContext("2d");return function(e,t){return function(n){return n in C||(C[n]=e.call(t,n)),C[n]}}((function(e){t.clearRect(0,0,1,1),t.fillStyle="#000",t.fillStyle=e;var n=t.fillStyle;return t.fillStyle="#fff",t.fillStyle=e,n!==t.fillStyle?null:(t.fillRect(0,0,1,1),Object(_.a)(t.getImageData(0,0,1,1).data))}))}();function S(e,t,n){return e<t?(t-e)*n+e:e-(e-t)*n}function k(e){for(var t=Math.min.apply(Math,Object(_.a)(Object.keys(e).map((function(e){return parseInt(e)})))),n=Math.max.apply(Math,Object(_.a)(Object.keys(e).map((function(e){return parseInt(e)})))),c={},a=L(e[t]),r=L(e[n]),o=t;o<=n;o++){for(var l=o/(n-t),i=[],s=0;s<3;s++)i[s]=Math.round(S(a[s],r[s],l));var u="#".concat(i[0].toString(16),i[1].toString(16),i[2].toString(16));c[o]=u}return c}var w=function e(t){var n=t.loadSculptPath,c=t.onUpdate,r=t.depth,o=t.orientation,l=y().config,s=Object(a.useState)(!1),u=Object(i.a)(s,2),O=u[0],h=u[1],v=Object(a.useState)(null),g=Object(i.a)(v,2),E=g[0],m=g[1],T=Object(a.useState)(null),x=Object(i.a)(T,2),_=x[0],C=x[1],L=0,S=1,w=2,R=Object(a.useRef)(L);Object(a.useEffect)((function(){-1===n&&O&&(m(-1),C(-1),h(!1)),"[object Array]"===Object.prototype.toString.call(n)&&R.current===L&&(R.current=S,h(!0),n.length>0&&(m(n[0]),n.length>1&&C(n[1])),R.current=w)}),[n]);var M=Object(a.useRef)([0]),N=Object(a.useRef)([]),U=Object(a.useRef)([]);function F(){M.current=O?[1].concat(N.current,U.current):[0],"[object Array]"===Object.prototype.toString.call(n)&&R.current===S||c(M.current)}Object(a.useEffect)((function(){F()}),[O,N,U,c]);var D=["btap",o];0===r&&D.push("base");var I=function(e,t){switch(e[d.PALETTE_TYPE]){case p:return e[d.DEFAULT_COLOR];case f:var n=e[d.PALETTE_NAME];if(n&&Object.keys(A).includes(n)){var c=A[n];return c[t%c.length]}return console.log("ERROR: Unknown Cycle Palette name '".concat(n,"'")),null;case j:var a=e[d.PALETTE_NAME];if(a&&Object.keys(P).includes(a)){var r=k(P[a]);return Object.keys(r).map((function(e){return parseInt(e)})).includes(t)?r[t]:e[d.DEFAULT_COLOR]}return console.log("ERROR: Unknown Gradient Palette name '".concat(a,"'")),null;default:return null}}(l,r);return O?Object(b.jsxs)("div",{className:D.join(" "),"data-depth":r,style:I?{backgroundColor:I}:null,children:[Object(b.jsx)(e,{depth:r+1,orientation:"h"===o?"v":"h",onUpdate:function(e){N.current=e,F()},loadSculptPath:E}),Object(b.jsx)(e,{depth:r+1,orientation:"h"===o?"v":"h",onUpdate:function(e){U.current=e,F()},loadSculptPath:_})]}):Object(b.jsx)("div",{className:D.join(" "),onClick:function(){return h(!0)},"data-depth":r,style:I?{backgroundColor:I}:null})};var R=function(e){var t,n=e.doSculpt,c=y(),a=c.config,r=c.dispatch;function o(e,t){switch(r(m(e,t)),E(e,t),e){case d.DEFAULT_COLOR:document.documentElement.style.setProperty("--default-color",t);break;case d.PALETTE_NAME:case d.GRADIENT_NAME:break;default:console.log("Unknown settings key: '".concat(e,"'"))}}return Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:"Make it yours"}),Object(b.jsxs)("div",{id:"settings",children:[Object(b.jsxs)("div",{className:"setting",children:[Object(b.jsx)("label",{children:"Palette type:"}),Object(b.jsx)("div",{id:"palette-type-options",children:Object.entries({"Monochrome (use default color)":p,"Repeating cycle":f,Gradient:j}).map((function(e){var t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(b.jsxs)("div",{children:[Object(b.jsx)("input",{type:"radio",name:"palette_type",value:c,id:"palette_type_".concat(c),checked:a[d.PALETTE_TYPE]===c,onChange:function(e){return o(d.PALETTE_TYPE,e.target.value)}}),Object(b.jsx)("label",{htmlFor:"palette_type_".concat(c),children:n}),f===c&&a[d.PALETTE_TYPE]===c?Object(b.jsxs)("div",{id:"palette-options",children:[Object(b.jsx)("span",{className:"help",children:"Palette colors will cycle and repeat with depth."}),Object.entries(A).map((function(e){var t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(b.jsxs)("div",{children:[Object(b.jsx)("input",{type:"radio",name:"palette",value:n,id:"palette_cycle_".concat(n),checked:a[d.PALETTE_NAME]===n,onChange:function(e){return o(d.PALETTE_NAME,e.target.value)}}),Object(b.jsx)("label",{htmlFor:"palette_cycle_".concat(n),children:c.map((function(e){return Object(b.jsx)("div",{className:"colorsample",style:{backgroundColor:e}},"palette_cycle_".concat(n,"_").concat(e.replace(/[^0-9a-zA-Z]/,"")))}))})]},"palette_cycle_".concat(n))}))]}):null,j===c&&a[d.PALETTE_TYPE]===c?Object(b.jsxs)("div",{id:"gradient-options",children:[Object(b.jsx)("span",{className:"help",children:"Palette colors transition between two colors."}),Object.entries(P).map((function(e){var t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(b.jsxs)("div",{children:[Object(b.jsx)("input",{type:"radio",name:"palette",value:n,id:"palette_gradient_".concat(n),checked:a[d.PALETTE_NAME]===n,onChange:function(e){return o(d.PALETTE_NAME,e.target.value)}}),Object(b.jsx)("label",{htmlFor:"palette_gradient_".concat(n),children:Object.entries(k(c)).map((function(e){var t=Object(i.a)(e,2),c=(t[0],t[1]);return Object(b.jsx)("div",{className:"colorsample gradient",style:{backgroundColor:c}},"palette_gradient_".concat(n,"_").concat(c.replace(/[^0-9a-zA-Z]/,"")))}))})]},"palette_gradient_".concat(n))}))]}):null]},"palette_type_".concat(c))}))})]}),Object(b.jsxs)("div",{className:"setting",children:[Object(b.jsx)("label",{htmlFor:"default-color",children:"Default color:"}),Object(b.jsx)("input",{id:"default-color",type:"text",value:(t=d.DEFAULT_COLOR,Object.keys(a).includes(t)?a[t]:""),onChange:function(e){return o(d.DEFAULT_COLOR,e.target.value)}}),Object(b.jsx)("div",{id:"default-color-sample",className:"colorsample"}),Object(b.jsx)("br",{}),Object(b.jsx)("span",{className:"help",children:"Can be any valid HTML color name, or a code in #rgb or #rrggbb format."})]}),Object(b.jsx)("button",{onClick:n,children:"Let's Sculpt!"})]})]})};function M(e,t){if(0===e.length)return[[0,0],[]];for(var n=[],c=0;c<2&&e.length>0;){var a=e.shift();if(c++,a){var r,o=M(e,t+1),l=Object(i.a)(o,2);r=l[0],e=l[1],n.push(r)}else n.push(a)}return[n,e]}var N=function(){var e=y().dispatch,t=3,n=2,c=1,r=Object(a.useState)(t),o=Object(i.a)(r,2),l=o[0],s=o[1],u=Object(a.useState)(null),j=Object(i.a)(u,2),f=j[0],p=j[1];function O(){s(c)}return Object(a.useEffect)((function(){var t=g();if(Object.entries(t).forEach((function(t){var n=Object(i.a)(t,2),c=n[0],a=n[1];Object.values(d).includes(c)&&e(m(c,a))})),t[d.SCULPT_PATH]){var n=M(function(e){for(var t=atob(e),n=[];t.length>0;){var c=t.substring(0,1);t=t.slice(1);for(var a=c.charCodeAt(0),r=7;r>=0;r--){var o=(a&Math.pow(2,r))>0?1:0;n.push(o)}}for(;0===n[n.length-1];)n.pop();return n}(t[d.SCULPT_PATH]),0),c=Object(i.a)(n,1)[0];c.length&&(console.log("starting replay"),O(),p(c[0]),console.log("window.performance.memory =",window.performance.memory))}}),[window.location.hash]),Object(b.jsx)("div",{className:"App",children:l===n?Object(b.jsxs)("div",{id:"main-menu",children:[Object(b.jsx)("h1",{children:"Le Menu"}),Object(b.jsx)("button",{onClick:O,children:"Sculpt!"}),Object(b.jsxs)("button",{onClick:function(){s(t)},children:["Configure",Object(b.jsx)("br",{}),"(Set your palette, etc.)"]}),Object(b.jsx)("a",{target:"_blank",rel:"noreferrer",className:"button",href:"https://github.com/benjaminbradley/pixelsculptor#readme",children:"About"})]}):Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:"canvasButtons",children:[Object(b.jsx)("button",{id:"goToMenu",onClick:function(){s(n)},children:"Menu"}),Object(b.jsx)("button",{onClick:function(){p(-1),setTimeout((function(){return p(null)}),10)},children:"Reset"})]}),l===t?Object(b.jsx)(R,{doSculpt:O}):Object(b.jsx)(w,{depth:0,orientation:"v",onUpdate:function(e){var t=function(e){for(var t="";e.length>0;){for(var n=e.splice(0,8),c=0,a=0;a<8&&a<n.length;a++){c+=n[a]*Math.pow(2,7-a)}t+=String.fromCharCode(c)}return btoa(t)}(e);E(d.SCULPT_PATH,t)},loadSculptPath:f})]})})},U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),c(e),a(e),r(e),o(e)}))};l.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(x,{children:Object(b.jsx)(N,{})})}),document.getElementById("root")),U()}},[[17,1,2]]]);
//# sourceMappingURL=main.5857d4c0.chunk.js.map