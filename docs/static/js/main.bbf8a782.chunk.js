(this.webpackJsonppixelsculptor=this.webpackJsonppixelsculptor||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var c,a=n(1),r=n.n(a),o=n(8),l=n.n(o),i=(n(14),n(2)),s=(n(15),n(6)),u=n(3),d=n(0),b={SCULPT_PATH:"s",PALETTE_TYPE:"pt",PALETTE_NAME:"p",DEFAULT_COLOR:"d"},f="g",j="c",p="m",O=(c={},Object(u.a)(c,b.PALETTE_TYPE,f),Object(u.a)(c,b.PALETTE_NAME,"gs"),Object(u.a)(c,b.DEFAULT_COLOR,"#ddd"),c),h=Object(a.createContext)(),v=1;function g(){if(0===window.location.hash.length)return{};var e={};return window.location.hash.substring(1).split("&").forEach((function(t){var n=t.split("="),c=Object(i.a)(n,2),a=c[0],r=c[1];r.length&&(e[a]=decodeURIComponent(r))})),e}function T(e,t){var n=g();n[e]=t;var c=Object.entries(n).map((function(e){var t=Object(i.a)(e,2),n=t[0],c=t[1];return"".concat(n,"=").concat(encodeURIComponent(c))})).join("&");window.location.hash=c}function E(e,t){return{type:v,key:e,value:t}}var m=function(e,t){switch(t.type){case v:return Object(s.a)(Object(s.a)({},e),{},Object(u.a)({},t.key,t.value));default:return e}};function _(e){var t=Object(a.useReducer)(m,O),n=Object(i.a)(t,2),c={config:n[0],dispatch:n[1]};return Object(d.jsx)(h.Provider,Object(s.a)({value:c},e))}function x(){return Object(a.useContext)(h)}var P=n(9),y={a:["#b2b2b2","#50394c","#f4e1d2","#ffef96"],b:["#80ced6","#d5f4e6","#fefbd8","#618685"],c:["#034f84","#92a8d1","#f7cac9","#f7786b"],d:["#4040a1","#36486b","#618685","#fefbd8"],e:["#6b5b95","#878f99","#a2b9bc","#b2ad7f"],f:["#622569","#b8a9c9","#d6d4e0","#5b9aa0"],g:["#c83349","#e06377","#eeac99","#f9d5e5"],h:["#ff7b25","#d64161","#6b5b95","#feb236"],i:["#d96459","#f2ae72","#588c7e","#f2e394"],j:["#b2ad7f","#878f99","#a2b9bc","#6b5b95"],bw:["#fff","#000"]},A={a:{0:"#fefbd8",15:"#4040a1"},b:{0:"#f9d5e5",15:"#c83349"},c:{0:"#80ced6",6:"#622569",15:"#000"},d:{0:"#f00",5:"#0f0",10:"#00f",15:"#f00"},e:{0:"#0f0",5:"#00f",10:"#f00",15:"#0f0"},f:{0:"#00f",5:"#f00",10:"#0f0",15:"#00f"},gs:{0:"#fff",15:"#000"}};var L={};var C=function(){var e=document.createElement("canvas");e.width=e.height=1;var t=e.getContext("2d");return function(e,t){return function(n){return n in L||(L[n]=e.call(t,n)),L[n]}}((function(e){t.clearRect(0,0,1,1),t.fillStyle="#000",t.fillStyle=e;var n=t.fillStyle;return t.fillStyle="#fff",t.fillStyle=e,n!==t.fillStyle?null:(t.fillRect(0,0,1,1),Object(P.a)(t.getImageData(0,0,1,1).data))}))}();function S(e,t,n){return e<t?(t-e)*n+e:e-(e-t)*n}function k(e){for(var t=Object.keys(e).map((function(e){return parseInt(e)})).sort((function(e,t){return e<t?-1:e===t?0:1})),n=0,c=1,a={};c<t.length;){for(var r=t[n],o=t[c],l=C(e[r]),i=C(e[o]),s=r;s<=o;s++){for(var u=(s-r)/(o-r),d=[],b=0;b<3;b++)d[b]=Math.round(S(l[b],i[b],u));var f="#".concat(d[0].toString(16).padStart(2,"0"),d[1].toString(16).padStart(2,"0"),d[2].toString(16).padStart(2,"0"));a[s]=f}n++,c++}return a}var w=function e(t){var n=t.loadSculptPath,c=t.onUpdate,r=t.depth,o=t.orientation,l=x().config,s=Object(a.useState)(!1),u=Object(i.a)(s,2),O=u[0],h=u[1],v=Object(a.useState)(null),g=Object(i.a)(v,2),T=g[0],E=g[1],m=Object(a.useState)(null),_=Object(i.a)(m,2),P=_[0],L=_[1],C=0,S=1,w=2,R=Object(a.useRef)(C);Object(a.useEffect)((function(){-1===n&&O&&(E(-1),L(-1),h(!1)),"[object Array]"===Object.prototype.toString.call(n)&&R.current===C&&(R.current=S,h(!0),n.length>0&&(E(n[0]),n.length>1&&L(n[1])),R.current=w)}),[n]);var U=Object(a.useRef)([0]),N=Object(a.useRef)([]),M=Object(a.useRef)([]);function F(){U.current=O?[1].concat(N.current,M.current):[0],"[object Array]"===Object.prototype.toString.call(n)&&R.current===S||c(U.current)}Object(a.useEffect)((function(){F()}),[O,N,M,c]);var D=["btap",o];0===r&&D.push("base");var H=function(e,t){switch(e[b.PALETTE_TYPE]){case p:return e[b.DEFAULT_COLOR];case j:var n=e[b.PALETTE_NAME];if(n&&Object.keys(y).includes(n)){var c=y[n];return c[t%c.length]}return console.log("ERROR: Unknown Cycle Palette name '".concat(n,"'")),null;case f:var a=e[b.PALETTE_NAME];if(a&&Object.keys(A).includes(a)){var r=k(A[a]);return Object.keys(r).map((function(e){return parseInt(e)})).includes(t)?r[t]:e[b.DEFAULT_COLOR]}return console.log("ERROR: Unknown Gradient Palette name '".concat(a,"'")),null;default:return null}}(l,r);return O?Object(d.jsxs)("div",{className:D.join(" "),"data-depth":r,style:H?{backgroundColor:H}:null,children:[Object(d.jsx)(e,{depth:r+1,orientation:"h"===o?"v":"h",onUpdate:function(e){N.current=e,F()},loadSculptPath:T}),Object(d.jsx)(e,{depth:r+1,orientation:"h"===o?"v":"h",onUpdate:function(e){M.current=e,F()},loadSculptPath:P})]}):Object(d.jsx)("div",{className:D.join(" "),onClick:function(){return h(!0)},"data-depth":r,style:H?{backgroundColor:H}:null})};var R=function(e){var t,n=e.doSculpt,c=x(),a=c.config,r=c.dispatch;function o(e,t){switch(r(E(e,t)),T(e,t),e){case b.DEFAULT_COLOR:document.documentElement.style.setProperty("--default-color",t);break;case b.PALETTE_TYPE:case b.PALETTE_NAME:case b.GRADIENT_NAME:break;default:console.log("Unknown settings key: '".concat(e,"'"))}}return Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{children:"Make it yours"}),Object(d.jsxs)("div",{id:"settings",children:[Object(d.jsxs)("div",{className:"setting",children:[Object(d.jsx)("label",{children:"Palette type:"}),Object(d.jsx)("div",{id:"palette-type-options",children:Object.entries({"Monochrome (use default color)":p,"Repeating cycle":j,Gradient:f}).map((function(e){var t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(d.jsxs)("div",{children:[Object(d.jsx)("input",{type:"radio",name:"palette_type",value:c,id:"palette_type_".concat(c),checked:a[b.PALETTE_TYPE]===c,onChange:function(e){return o(b.PALETTE_TYPE,e.target.value)}}),Object(d.jsx)("label",{htmlFor:"palette_type_".concat(c),children:n}),j===c&&a[b.PALETTE_TYPE]===c?Object(d.jsxs)("div",{id:"palette-options",children:[Object(d.jsx)("span",{className:"help",children:"Palette colors will cycle and repeat with depth."}),Object.entries(y).map((function(e){var t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(d.jsxs)("div",{children:[Object(d.jsx)("input",{type:"radio",name:"palette",value:n,id:"palette_cycle_".concat(n),checked:a[b.PALETTE_NAME]===n,onChange:function(e){return o(b.PALETTE_NAME,e.target.value)}}),Object(d.jsx)("label",{htmlFor:"palette_cycle_".concat(n),children:c.map((function(e){return Object(d.jsx)("div",{className:"colorsample",style:{backgroundColor:e}},"palette_cycle_".concat(n,"_").concat(e.replace(/[^0-9a-zA-Z]/,"")))}))})]},"palette_cycle_".concat(n))}))]}):null,f===c&&a[b.PALETTE_TYPE]===c?Object(d.jsxs)("div",{id:"gradient-options",children:[Object(d.jsx)("span",{className:"help",children:"Palette colors transition between two or more colors."}),Object.entries(A).map((function(e){var t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(d.jsxs)("div",{children:[Object(d.jsx)("input",{type:"radio",name:"palette",value:n,id:"palette_gradient_".concat(n),checked:a[b.PALETTE_NAME]===n,onChange:function(e){return o(b.PALETTE_NAME,e.target.value)}}),Object(d.jsx)("label",{htmlFor:"palette_gradient_".concat(n),children:Object.entries(k(c)).map((function(e){var t=Object(i.a)(e,2),c=t[0],a=t[1];return Object(d.jsx)("div",{className:"colorsample gradient",style:{backgroundColor:a}},"palette_gradient_".concat(n,"_").concat(c,"_").concat(a.replace(/[^0-9a-zA-Z]/,"")))}))})]},"palette_gradient_".concat(n))}))]}):null]},"palette_type_".concat(c))}))})]}),Object(d.jsxs)("div",{className:"setting",children:[Object(d.jsx)("label",{htmlFor:"default-color",children:"Default color:"}),Object(d.jsx)("input",{id:"default-color",type:"text",value:(t=b.DEFAULT_COLOR,Object.keys(a).includes(t)?a[t]:""),onChange:function(e){return o(b.DEFAULT_COLOR,e.target.value)}}),Object(d.jsx)("div",{id:"default-color-sample",className:"colorsample"}),Object(d.jsx)("br",{}),Object(d.jsx)("span",{className:"help",children:"Can be any valid HTML color name, or a code in #rgb or #rrggbb format."})]}),Object(d.jsx)("button",{onClick:n,children:"Let's Sculpt!"})]})]})};function U(e,t){if(0===e.length)return[[0,0],[]];for(var n=[],c=0;c<2&&e.length>0;){var a=e.shift();if(c++,a){var r,o=U(e,t+1),l=Object(i.a)(o,2);r=l[0],e=l[1],n.push(r)}else n.push(a)}return[n,e]}var N=function(){var e=x(),t=e.config,n=e.dispatch,c=3,r=2,o=1,l=Object(a.useState)(c),s=Object(i.a)(l,2),u=s[0],f=s[1],j=Object(a.useState)(null),p=Object(i.a)(j,2),O=p[0],h=p[1];function v(){f(o)}return Object(a.useEffect)((function(){var e=g();Object.entries(e).forEach((function(e){var t=Object(i.a)(e,2),c=t[0],a=t[1];Object.values(b).includes(c)&&n(E(c,a))})),e[b.SCULPT_PATH]&&t[b.SCULPT_PATH]!==e[b.SCULPT_PATH]&&(t[b.SCULPT_PATH]=e[b.SCULPT_PATH])}),[window.location.hash]),Object(a.useEffect)((function(){var e=U(function(e){for(var t=atob(e),n=[];t.length>0;){var c=t.substring(0,1);t=t.slice(1);for(var a=c.charCodeAt(0),r=7;r>=0;r--){var o=(a&Math.pow(2,r))>0?1:0;n.push(o)}}for(;0===n[n.length-1];)n.pop();return n}(t[b.SCULPT_PATH]),0),n=Object(i.a)(e,1)[0];n.length&&(console.log("starting replay"),v(),h(n[0]),console.log("window.performance.memory =",window.performance.memory))}),[t[b.SCULPT_PATH]]),Object(d.jsx)("div",{className:"App",children:u===r?Object(d.jsxs)("div",{id:"main-menu",children:[Object(d.jsx)("h1",{children:"Le Menu"}),Object(d.jsx)("button",{onClick:v,children:"Sculpt!"}),Object(d.jsxs)("button",{onClick:function(){f(c)},children:["Configure",Object(d.jsx)("br",{}),"(Set your palette, etc.)"]}),Object(d.jsx)("a",{target:"_blank",rel:"noreferrer",className:"button",href:"https://github.com/benjaminbradley/pixelsculptor#readme",children:"About"})]}):Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{className:"canvasButtons",children:[Object(d.jsx)("button",{id:"goToMenu",onClick:function(){f(r)},children:"Menu"}),Object(d.jsx)("button",{onClick:function(){h(-1),setTimeout((function(){return h(null)}),10)},children:"Reset"})]}),u===c?Object(d.jsx)(R,{doSculpt:v}):Object(d.jsx)(w,{depth:0,orientation:"v",onUpdate:function(e){var t=function(e){for(var t="";e.length>0;){for(var n=e.splice(0,8),c=0,a=0;a<8&&a<n.length;a++){c+=n[a]*Math.pow(2,7-a)}t+=String.fromCharCode(c)}return btoa(t)}(e);T(b.SCULPT_PATH,t)},loadSculptPath:O})]})})},M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),c(e),a(e),r(e),o(e)}))};l.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(_,{children:Object(d.jsx)(N,{})})}),document.getElementById("root")),M()}},[[17,1,2]]]);
//# sourceMappingURL=main.bbf8a782.chunk.js.map