(this.webpackJsonppixelsculptor=this.webpackJsonppixelsculptor||[]).push([[0],{11:function(e,t,n){},12:function(e,t,n){},14:function(e,t,n){"use strict";n.r(t);var c,a=n(1),r=n.n(a),o=n(6),l=n.n(o),i=(n(11),n(2)),s=(n(12),n(4)),u=n(3),b=n(0),d=Object(a.createContext)(),j=1,f={SCULPT_PATH:"s",PALETTE_NAME:"p",DEFAULT_COLOR:"d"},h=(c={},Object(u.a)(c,f.PALETTE_NAME,"none"),Object(u.a)(c,f.DEFAULT_COLOR,"#ddd"),c);function O(){if(0===window.location.hash.length)return{};var e={};return window.location.hash.substring(1).split("&").forEach((function(t){var n=t.split("="),c=Object(i.a)(n,2),a=c[0],r=c[1];e[a]=decodeURIComponent(r)})),e}function p(e,t){var n=O();n[e]=t;var c=Object.entries(n).map((function(e){var t=Object(i.a)(e,2),n=t[0],c=t[1];return"".concat(n,"=").concat(encodeURIComponent(c))})).join("&");window.location.hash=c}function v(e,t){return{type:j,key:e,value:t}}var g=function(e,t){switch(t.type){case j:return Object(s.a)(Object(s.a)({},e),{},Object(u.a)({},t.key,t.value));default:return e}};function x(e){var t=Object(a.useReducer)(g,h),n=Object(i.a)(t,2),c={config:n[0],dispatch:n[1]};return Object(b.jsx)(d.Provider,Object(s.a)({value:c},e))}function m(){return Object(a.useContext)(d)}var E={a:["#b2b2b2","#50394c","#f4e1d2","#ffef96"],b:["#80ced6","#d5f4e6","#fefbd8","#618685"],c:["#034f84","#92a8d1","#f7cac9","#f7786b"],d:["#4040a1","#36486b","#618685","#fefbd8"],e:["#6b5b95","#878f99","#a2b9bc","#b2ad7f"],f:["#622569","#b8a9c9","#d6d4e0","#5b9aa0"],g:["#c83349","#e06377","#eeac99","#f9d5e5"],h:["#ff7b25","#d64161","#6b5b95","#feb236"],i:["#d96459","#f2ae72","#588c7e","#f2e394"],j:["#b2ad7f","#878f99","#a2b9bc","#6b5b95"],bw:["#fff","#000"]};var C=function e(t){var n=t.loadSculptPath,c=t.onUpdate,r=t.depth,o=t.orientation,l=m().config,s=Object(a.useState)(!1),u=Object(i.a)(s,2),d=u[0],j=u[1],h=Object(a.useState)(null),O=Object(i.a)(h,2),p=O[0],v=O[1],g=Object(a.useState)(null),x=Object(i.a)(g,2),C=x[0],T=x[1],A=0,y=1,L=2,P=Object(a.useRef)(A);Object(a.useEffect)((function(){-1===n&&d&&(v(-1),T(-1),j(!1)),"[object Array]"===Object.prototype.toString.call(n)&&P.current===A&&(P.current=y,j(!0),n.length>0&&(v(n[0]),n.length>1&&T(n[1])),P.current=L)}),[n]);var _=Object(a.useRef)([0]),k=Object(a.useRef)([]),S=Object(a.useRef)([]);function w(){_.current=d?[1].concat(k.current,S.current):[0],"[object Array]"===Object.prototype.toString.call(n)&&P.current===y||c(_.current)}Object(a.useEffect)((function(){w()}),[d,k,S,c]);var N=["btap",o];0===r&&N.push("base");var U=null,M=l[f.PALETTE_NAME];if(M&&Object.keys(E).includes(M)){var R=E[M];U=R[r%R.length]}return d?Object(b.jsxs)("div",{className:N.join(" "),"data-depth":r,style:U?{backgroundColor:U}:null,children:[Object(b.jsx)(e,{depth:r+1,orientation:"h"===o?"v":"h",onUpdate:function(e){k.current=e,w()},loadSculptPath:p}),Object(b.jsx)(e,{depth:r+1,orientation:"h"===o?"v":"h",onUpdate:function(e){S.current=e,w()},loadSculptPath:C})]}):Object(b.jsx)("div",{className:N.join(" "),onClick:function(){return j(!0)},"data-depth":r,style:U?{backgroundColor:U}:null})};var T=function(e){var t,n=e.doSculpt,c=m(),a=c.config,r=c.dispatch;function o(e,t){switch(r(v(e,t)),p(e,t),e){case f.DEFAULT_COLOR:document.documentElement.style.setProperty("--default-color",t);break;case f.PALETTE_NAME:break;default:console.log("Unknown settings key: '".concat(e,"'"))}}return Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:"Make it yours"}),Object(b.jsxs)("div",{id:"settings",children:[Object(b.jsxs)("div",{className:"setting",children:[Object(b.jsx)("label",{htmlFor:"default-color",children:"Default color:"}),Object(b.jsx)("input",{id:"default-color",type:"text",value:(t=f.DEFAULT_COLOR,Object.keys(a).includes(t)?a[t]:""),onChange:function(e){return o(f.DEFAULT_COLOR,e.target.value)}}),Object(b.jsx)("div",{id:"default-color-sample",className:"colorsample"}),Object(b.jsx)("br",{}),Object(b.jsx)("span",{className:"help",children:"Can be any valid HTML color name, or a code in #rgb or #rrggbb format."})]}),Object(b.jsxs)("div",{className:"setting",children:[Object(b.jsx)("label",{children:"Palette:"}),Object(b.jsxs)("div",{id:"palette-options",onChange:function(e){return o(f.PALETTE_NAME,e.target.value)},children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("input",{type:"radio",name:"palette",value:"none",id:"palette_none",checked:"none"===a[f.PALETTE_NAME]}),Object(b.jsx)("label",{htmlFor:"palette_none",children:"None (use default color)"})]}),Object.entries(E).map((function(e){var t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(b.jsxs)("div",{children:[Object(b.jsx)("input",{type:"radio",name:"palette",value:n,id:"palette_".concat(n),checked:a[f.PALETTE_NAME]===n}),Object(b.jsx)("label",{htmlFor:"palette_".concat(n),children:c.map((function(e){return Object(b.jsx)("div",{className:"colorsample",style:{backgroundColor:e}},"palette_".concat(n,"_").concat(e.replace(/[^0-9a-zA-Z]/,"")))}))})]},"palette_".concat(n))}))]}),Object(b.jsx)("span",{className:"help",children:"Palette colors will cycle and repeat with depth."})]}),Object(b.jsx)("button",{onClick:n,children:"Let's Sculpt!"})]})]})};function A(e,t){if(0===e.length)return[[0,0],[]];for(var n=[],c=0;c<2&&e.length>0;){var a=e.shift();if(c++,a){var r,o=A(e,t+1),l=Object(i.a)(o,2);r=l[0],e=l[1],n.push(r)}else n.push(a)}return[n,e]}var y=function(){var e=m().dispatch,t=3,n=2,c=1,r=Object(a.useState)(t),o=Object(i.a)(r,2),l=o[0],s=o[1],u=Object(a.useState)(null),d=Object(i.a)(u,2),j=d[0],h=d[1];function g(){s(c)}return Object(a.useEffect)((function(){var t=O();if(Object.entries(t).forEach((function(t){var n=Object(i.a)(t,2),c=n[0],a=n[1];Object.values(f).includes(c)&&e(v(c,a))})),t[f.SCULPT_PATH]){var n=A(function(e){for(var t=atob(e),n=[];t.length>0;){var c=t.substring(0,1);t=t.slice(1);for(var a=c.charCodeAt(0),r=7;r>=0;r--){var o=(a&Math.pow(2,r))>0?1:0;n.push(o)}}for(;0===n[n.length-1];)n.pop();return n}(t[f.SCULPT_PATH]),0),c=Object(i.a)(n,1)[0];c.length&&(console.log("starting replay"),g(),h(c[0]),console.log("window.performance.memory =",window.performance.memory))}}),[window.location.hash]),Object(b.jsx)("div",{className:"App",children:l===n?Object(b.jsxs)("div",{id:"main-menu",children:[Object(b.jsx)("h1",{children:"Le Menu"}),Object(b.jsx)("button",{onClick:g,children:"Sculpt!"}),Object(b.jsxs)("button",{onClick:function(){s(t)},children:["Configure",Object(b.jsx)("br",{}),"(Set your palette, etc.)"]}),Object(b.jsx)("a",{target:"_blank",rel:"noreferrer",className:"button",href:"https://github.com/benjaminbradley/pixelsculptor#readme",children:"About"})]}):Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:"canvasButtons",children:[Object(b.jsx)("button",{id:"goToMenu",onClick:function(){s(n)},children:"Menu"}),Object(b.jsx)("button",{onClick:function(){h(-1),setTimeout((function(){return h(null)}),10)},children:"Reset"})]}),l===t?Object(b.jsx)(T,{doSculpt:g}):Object(b.jsx)(C,{depth:0,orientation:"v",onUpdate:function(e){var t=function(e){for(var t="";e.length>0;){for(var n=e.splice(0,8),c=0,a=0;a<8&&a<n.length;a++){c+=n[a]*Math.pow(2,7-a)}t+=String.fromCharCode(c)}return btoa(t)}(e);p(f.SCULPT_PATH,t)},loadSculptPath:j})]})})},L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,15)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),c(e),a(e),r(e),o(e)}))};l.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(x,{children:Object(b.jsx)(y,{})})}),document.getElementById("root")),L()}},[[14,1,2]]]);
//# sourceMappingURL=main.cd9dca87.chunk.js.map